(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"79Qs":function(e,t,a){},K3AC:function(e,t,a){"use strict";a.r(t);a("8QGh");var n,r,c,o,i,s,u,l,d,p=a("2fM7"),m=(a("k3Gp"),a("kLXV")),f=(a("tULf"),a("Vl3Y")),y=(a("QCje"),a("fyUT")),b=(a("mbEz"),a("wCAj")),w=(a("L/Qf"),a("2/Rp")),v=(a("1vPl"),a("5rEg")),h=(a("aIZi"),a("jsC+")),g=(a("2WkQ"),a("BvKs")),k=(a("8/o9"),a("tsqr")),E=a("o0o1"),x=a.n(E),_=a("J4zp"),C=a.n(_),O=a("q1tI"),j=a.n(O),I=a("kMSe"),P=a("2vnA"),N=a("wd/R"),L=a.n(N),z=a("yG8O"),S=a.n(z),D=a("lwsE"),q=a.n(D),A=a("W8MJ"),Q=a.n(A),R=a("U+yc"),Y=a.n(R),V=(a("1ABj"),a("vdCo")),J=(n=P.d.bound,r=P.d.bound,c=P.d.bound,o=P.d.bound,i=P.d.bound,s=function(){function e(){q()(this,e),S()(this,"productList",u,this),S()(this,"productCategory",l,this),S()(this,"pagenation",d,this)}return Q()(e,[{key:"getProductList",value:function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(Object(V.a)("/api/v1/admin/product/list",e,!1));case 2:if(0!==(t=a.sent).code){a.next=7;break}return this.productList=t.data.list,this.pagenation.total=t.data.total,a.abrupt("return",!0);case 7:return a.abrupt("return",!1);case 8:case"end":return a.stop()}}),null,this)}},{key:"synchronizationProduct",value:function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(Object(V.a)("/api/v1/admin/product/sync",{},!1));case 2:0===(e=t.sent).code?k.a.success(e.msg):k.a.error(e.msg);case 4:case"end":return t.stop()}}))}},{key:"editProduct",value:function(e){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(Object(V.a)("/api/v1/admin/product/edit",e,!1));case 2:if(0!==t.sent.code){t.next=5;break}return t.abrupt("return",!0);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}))}},{key:"removeProduct",value:function(e){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(Object(V.a)("/api/v1/admin/product/delete",{product_id:e},!1));case 2:if(0!==t.sent.code){t.next=5;break}return t.abrupt("return",!0);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}))}},{key:"getCategories",value:function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(Object(V.a)("/api/v1/admin/product/category",{},!1));case 2:if(0!==(e=t.sent).code){t.next=6;break}return this.productCategory=e.data,t.abrupt("return",!0);case 6:return t.abrupt("return",!1);case 7:case"end":return t.stop()}}),null,this)}}]),e}(),u=Y()(s.prototype,"productList",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=Y()(s.prototype,"productCategory",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=Y()(s.prototype,"pagenation",[P.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{page:1,page_size:10,total:0}}}),Y()(s.prototype,"getProductList",[n],Object.getOwnPropertyDescriptor(s.prototype,"getProductList"),s.prototype),Y()(s.prototype,"synchronizationProduct",[r],Object.getOwnPropertyDescriptor(s.prototype,"synchronizationProduct"),s.prototype),Y()(s.prototype,"editProduct",[c],Object.getOwnPropertyDescriptor(s.prototype,"editProduct"),s.prototype),Y()(s.prototype,"removeProduct",[o],Object.getOwnPropertyDescriptor(s.prototype,"removeProduct"),s.prototype),Y()(s.prototype,"getCategories",[i],Object.getOwnPropertyDescriptor(s.prototype,"getCategories"),s.prototype),s),M=Object(O.createContext)(new J),B=a("lxvL");a("YI6B"),t.default=Object(I.a)((function(){var e=Object(O.useContext)(M),t=e.productList,a=e.getProductList,n=e.pagenation,r=e.synchronizationProduct,c=e.editProduct,o=e.removeProduct,i=e.getCategories,s=e.productCategory,u=Object(O.useRef)(null),l=Object(O.useRef)(null),d=Object(O.useState)([]),E=C()(d,2),_=E[0],I=E[1],N=Object(O.useState)({}),z=C()(N,2),S=z[0],D=z[1],q=Object(O.useState)(!1),A=C()(q,2),Q=A[0],R=A[1],Y=Object(O.useState)(!1),V=C()(Y,2),J=V[0],F=V[1],G=Object(O.useState)(!1),K=C()(G,2),T=K[0],U=K[1],H=Object(O.useState)(""),W=C()(H,2),X=W[0],Z=W[1],$=Object(O.useState)(""),ee=C()($,2),te=ee[0],ae=ee[1],ne=function(){var e,t,n,r=arguments;return x.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,t=r.length>1&&void 0!==r[1]?r[1]:10,n=r.length>2&&void 0!==r[2]?r[2]:{},c.next=5,x.a.awrap(a({page:e,page_size:t,search:n}));case 5:case"end":return c.stop()}}))},re=function(e){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(c(e));case 2:if(!t.sent){t.next=9;break}return k.a.success("修改成功"),t.next=7,x.a.awrap(ne());case 7:t.next=10;break;case 9:k.a.error("修改失败");case 10:case"end":return t.stop()}}))},ce=function(e){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(o(e));case 2:if(!t.sent){t.next=9;break}return k.a.success("删除成功"),t.next=7,x.a.awrap(ne());case 7:t.next=10;break;case 9:k.a.error("删除失败");case 10:case"end":return t.stop()}}))};Object(O.useEffect)((function(){console.log(S)}),[S]);var oe=function(e){return j.a.createElement(g.a,{style:{width:"120px",textAlign:"center",overflow:"hidden"}},j.a.createElement(g.a.Item,{style:{width:"100%"},onClick:function(){return function(e){D(e),R(!0),setTimeout((function(){u.current.setFieldsValue({bonus_rate:e.bonus_rate,sec_bonus_rate:e.sec_bonus_rate,trd_bonus_rate:e.trd_bonus_rate})}),200)}(e)}},j.a.createElement("span",null,"编辑佣金比例")),j.a.createElement(g.a.Item,{style:{width:"100%"},onClick:function(){return function(e){D(e),U(!0),setTimeout((function(){l.current.setFieldsValue({cate_id:e.cate_id})}),200)}(e)}},j.a.createElement("span",null,"设置分类")),j.a.createElement(g.a.Item,{style:{width:"100%"},onClick:function(){return function(e){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:D(e),F(!0);case 2:case"end":return t.stop()}}))}(e)}},j.a.createElement("span",null,"删除")))},ie={selectedRowKeys:_,onChange:function(e,t){I(e),console.log(t)},getCheckboxProps:function(e){return{disabled:e.disabled}}},se=[{title:"商品id",dataIndex:"tiktok_product_id",key:"1",width:220},{title:"商品名称",dataIndex:"product_name",key:"2",width:230},{title:"所在分类",dataIndex:"category_name",key:"3",width:130},{title:"商品抖音店id",dataIndex:"tiktok_shop_id",key:"4",width:130},{title:"商品价格",key:"5",width:230,render:function(e){return j.a.createElement("div",null,e.sku.map((function(e){return j.a.createElement("p",{key:e.sku_id},j.a.createElement("span",null,e.spec_desc),j.a.createElement("span",null," ¥ ",e.sku_price))})))}},{title:"佣金比例",dataIndex:"bonus_rate",key:"6",width:91},{title:"二级佣金比例",dataIndex:"sec_bonus_rate",key:"7",width:130},{title:"团队长佣金比例",dataIndex:"trd_bonus_rate",key:"9",width:140},{title:"创建时间",dataIndex:"create_at",key:"10",width:175,render:function(e){return j.a.createElement("span",null,L()(1e3*e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"操作",key:"operactor",fixed:"right",width:70,render:function(e){return j.a.createElement(h.a,{overlay:function(){return oe(e)}},j.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},"菜单"))}}];return Object(O.useEffect)((function(){ne(),i()}),[]),j.a.createElement("div",{className:"product-manage"},j.a.createElement(B.a,{className:"list-head",title:"商品管理"}),j.a.createElement("div",{className:"list-content"},j.a.createElement("div",{className:"list-content-inner"},j.a.createElement("div",{className:"inner-wrap"},j.a.createElement("div",{className:"inner-wrap-head"},j.a.createElement("div",{className:"head-item"},j.a.createElement("span",null,"商品id："),j.a.createElement(v.a,{style:{width:"250px"},value:X,onChange:function(e){Z(e.target.value)}}),j.a.createElement(w.a,{className:"search-btn",type:"primary",onClick:function(){return x.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.awrap(ne(1,10,{tiktok_product_id:X}));case 2:case"end":return e.stop()}}))}},"查询"),j.a.createElement(w.a,{className:"reset-btn",onClick:function(){Z(""),ne()}},"重置")),j.a.createElement("div",{className:"head-item"},j.a.createElement("span",null,"订单号："),j.a.createElement(v.a,{style:{width:"250px"},value:te,onChange:function(e){ae(e.target.value)}}),j.a.createElement(w.a,{className:"search-btn",type:"primary",onClick:function(){return x.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.awrap(ne(1,10,{cate_id:te}));case 2:case"end":return e.stop()}}))}},"查询"),j.a.createElement(w.a,{className:"reset-btn",onClick:function(){ae(""),ne()}},"重置")),j.a.createElement("div",{className:"head-item"},j.a.createElement(w.a,{type:"primary",onClick:function(){return x.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.awrap(r());case 2:case"end":return e.stop()}}))}},"同步"))),j.a.createElement("div",{className:"inner-wrap-content"},j.a.createElement(b.a,{rowKey:function(e){return e.tiktok_product_id},columns:se,dataSource:t,rowSelection:ie,scroll:{y:"100%",x:"100%"},pagination:{position:["none","bottomRight"],total:Object(P.o)(n).total,pageSize:n.page_size,defaultCurrent:1},onChange:function(e){ne(e.current)}}))))),j.a.createElement(m.a,{title:"编辑佣金比例",visible:Q,onOk:function(){var e,t,a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:for(a in console.log(S),e=u.current.getFieldValue(),t={},e)t[a]=JSON.stringify(e[a]);return n.next=6,x.a.awrap(re({product_id:S.product_id,data:t}));case 6:R(!1);case 7:case"end":return n.stop()}}))},onCancel:function(){R(!1)}},j.a.createElement(f.a,{labelCol:{span:6},wrapperCol:{span:18},ref:u},j.a.createElement(f.a.Item,{label:"佣金比例"},j.a.createElement(f.a.Item,{name:"bonus_rate",rules:[{required:!0,message:"佣金比例不能为空"}],style:{display:"inline-block"}},j.a.createElement(y.a,null)),j.a.createElement(f.a.Item,{style:{display:"inline-block"}},"%")),j.a.createElement(f.a.Item,{label:"二级佣金比例"},j.a.createElement(f.a.Item,{name:"sec_bonus_rate",rules:[{required:!0,message:"二级佣金比例不能为空"}],style:{display:"inline-block"}},j.a.createElement(y.a,null)),j.a.createElement(f.a.Item,{style:{display:"inline-block"}},"%")),j.a.createElement(f.a.Item,{label:"团队长佣金比例"},j.a.createElement(f.a.Item,{name:"trd_bonus_rate",rules:[{required:!0,message:"团长佣金比例不能为空"}],style:{display:"inline-block"}},j.a.createElement(y.a,null)),j.a.createElement(f.a.Item,{style:{display:"inline-block"}},"%")))),j.a.createElement(m.a,{title:"通过",visible:J,onOk:function(){return x.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.awrap(ce(S.product_id));case 2:F(!1);case 3:case"end":return e.stop()}}))},onCancel:function(){F(!1)}},j.a.createElement("p",null,"是否删除",S.product_name,"商品？")),j.a.createElement(m.a,{title:"设置分类",visible:T,onOk:function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(S),e=l.current.getFieldValue(),t.next=4,x.a.awrap(re({product_id:S.product_id,data:e}));case 4:U(!1);case 5:case"end":return t.stop()}}))},onCancel:function(){U(!1)}},j.a.createElement(f.a,{labelCol:{span:6},wrapperCol:{span:18},ref:l},j.a.createElement(f.a.Item,{label:"选择分类",name:"cate_id",rules:[{required:!0}]},j.a.createElement(p.a,{style:{width:120}},s.map((function(e){return j.a.createElement(p.a.Option,{value:e.cate_id,key:e.cate_id},e.category_name)})))))))}))},YI6B:function(e,t,a){},lxvL:function(e,t,a){"use strict";a("L/Qf");var n=a("2/Rp"),r=a("q1tI"),c=a.n(r),o=a("4i/N");a("79Qs");t.a=function(e){var t=e.title,a=e.onGetActiveList,r=e.onClose,i=e.onAdd;return c.a.createElement("div",{className:"inner-page-head"},t,a?c.a.createElement(n.a,{className:"active-btn",onClick:a},"双十一活动排行榜"):"",i?c.a.createElement(n.a,{className:"active-btn",type:"primary",onClick:i},"发布公告"):"",r?c.a.createElement(o.a,{className:"close-icon",onClick:r}):"")}}}]);