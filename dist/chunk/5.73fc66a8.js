(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"5EAG":function(e,t,n){},"5zCA":function(e,t,n){"use strict";n.r(t);n("tULf");var a,r,c,i,o,s,u,l=n("Vl3Y"),p=(n("1vPl"),n("5rEg")),d=(n("k3Gp"),n("kLXV")),f=(n("mbEz"),n("wCAj")),m=(n("8/o9"),n("tsqr")),b=n("o0o1"),v=n.n(b),y=n("J4zp"),w=n.n(y),x=n("q1tI"),E=n.n(x),g=n("kMSe"),h=n("2vnA"),k=n("yG8O"),N=n.n(k),O=n("lwsE"),j=n.n(O),C=n("W8MJ"),L=n.n(C),A=n("U+yc"),z=n.n(A),I=(n("1ABj"),n("vdCo")),_=(a=h.d.bound,r=h.d.bound,c=h.d.bound,i=h.d.bound,o=function(){function e(){j()(this,e),N()(this,"noticeList",s,this),N()(this,"pagenation",u,this)}return L()(e,[{key:"getNoticeList",value:function(e){var t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(Object(I.a)("/api/v1/admin/system/notice/list",e,!1));case 2:if(0!==(t=n.sent).code){n.next=7;break}return this.noticeList=t.data.list,this.pagenation.total=t.data.total,n.abrupt("return",!0);case 7:return n.abrupt("return",!1);case 8:case"end":return n.stop()}}),null,this)}},{key:"removeNotice",value:function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(Object(I.a)("/api/v1/admin/system/notice/delete",{notice_id:e},!1));case 2:if(0!==t.sent.code){t.next=5;break}return t.abrupt("return",!0);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}))}},{key:"editNotive",value:function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(Object(I.a)("/api/v1/admin/system/notice/edit",e,!1));case 2:if(0!==t.sent.code){t.next=5;break}return t.abrupt("return",!0);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}))}},{key:"addNotice",value:function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(Object(I.a)("/api/v1/admin/system/notice/publish",e,!1));case 2:if(0!==t.sent.code){t.next=5;break}return t.abrupt("return",!0);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}))}}]),e}(),s=z()(o.prototype,"noticeList",[h.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=z()(o.prototype,"pagenation",[h.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{page:1,page_size:10,total:0}}}),z()(o.prototype,"getNoticeList",[a],Object.getOwnPropertyDescriptor(o.prototype,"getNoticeList"),o.prototype),z()(o.prototype,"removeNotice",[r],Object.getOwnPropertyDescriptor(o.prototype,"removeNotice"),o.prototype),z()(o.prototype,"editNotive",[c],Object.getOwnPropertyDescriptor(o.prototype,"editNotive"),o.prototype),z()(o.prototype,"addNotice",[i],Object.getOwnPropertyDescriptor(o.prototype,"addNotice"),o.prototype),o),S=Object(x.createContext)(new _),D=n("lxvL");n("5EAG"),t.default=Object(g.a)((function(){var e=Object(x.useContext)(S),t=e.noticeList,n=e.getNoticeList,a=e.pagenation,r=e.removeNotice,c=e.editNotive,i=e.addNotice,o=Object(x.useRef)(),s=Object(x.useRef)(),u=Object(x.useState)({}),b=w()(u,2),y=b[0],g=b[1],k=Object(x.useState)(!1),N=w()(k,2),O=N[0],j=N[1],C=Object(x.useState)(!1),L=w()(C,2),A=L[0],z=L[1],I=Object(x.useState)(!1),_=w()(I,2),V=_[0],F=_[1],G=function(){var e,t,a,r=arguments;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,t=r.length>1&&void 0!==r[1]?r[1]:10,a=r.length>2&&void 0!==r[2]?r[2]:{},c.next=5,v.a.awrap(n({page:e,page_size:t,search:a}));case 5:case"end":return c.stop()}}))},P=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(r(e));case 2:t.sent?(m.a.success("删除公告成功"),G()):m.a.error("删除公告失败");case 4:case"end":return t.stop()}}))},J=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(c(e));case 2:if(!t.sent){t.next=9;break}return m.a.success("修改成功"),t.next=7,v.a.awrap(G());case 7:t.next=10;break;case 9:m.a.error("修改失败");case 10:case"end":return t.stop()}}))},R=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(i(e));case 2:if(!t.sent){t.next=9;break}return m.a.success("发布成功"),t.next=7,v.a.awrap(G());case 7:t.next=10;break;case 9:m.a.error("发布失败");case 10:case"end":return t.stop()}}))},q=[{title:"序号",key:"1",width:70,render:function(e,t,n){return E.a.createElement("span",null,n+1)}},{title:"公告标题",key:"2",dataIndex:"title",width:170},{title:"内容",key:"3",dataIndex:"content"},{title:"操作",key:"operator",width:130,render:function(e){return E.a.createElement(E.a.Fragment,null,E.a.createElement("a",{className:"operater-a",onClick:function(t){t.preventDefault(),g(e),z(!0),setTimeout((function(){o.current.setFieldsValue({title:e.title,acontent:e.content})}),200)}},"编辑"),E.a.createElement("a",{className:"operater-a",onClick:function(t){t.preventDefault(),g(e),j(!0)}},"删除"))}}];return Object(x.useEffect)((function(){G()}),[]),Object(x.useEffect)((function(){A&&o.current&&o.current.setFieldsValue({title:y.title,content:y.content})}),[A,o.current]),E.a.createElement("div",{className:"notice-manage"},E.a.createElement(D.a,{className:"list-head",title:"公告管理",onAdd:function(){F(!0)}}),E.a.createElement("div",{className:"list-content"},E.a.createElement("div",{className:"list-content-inner"},E.a.createElement("div",{className:"inner-wrap"},E.a.createElement("div",{className:"inner-wrap-content"},E.a.createElement(f.a,{rowKey:function(e){return e.create_at},columns:q,dataSource:t,scroll:{y:"100%",x:"100%"},pagination:{position:["none","bottomRight"],total:Object(h.o)(a).total,pageSize:a.page_size,defaultCurrent:1},onChange:function(e){G(e.current)}}))))),E.a.createElement(d.a,{title:"确认删除",visible:O,onOk:function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.awrap(P(y.notice_id));case 2:j(!1);case 3:case"end":return e.stop()}}))},onCancel:function(){j(!1)}},E.a.createElement("p",null,"是否确认删除公告？")),E.a.createElement(d.a,{title:"编辑公告",visible:A,onOk:function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.awrap(J({notice_id:y.notice_id,data:o.current.getFieldValue()}));case 2:z(!1);case 3:case"end":return e.stop()}}))},onCancel:function(){z(!1)}},E.a.createElement(l.a,{ref:o},E.a.createElement(l.a.Item,{label:"公告标题",name:"title"},E.a.createElement(p.a,null)),E.a.createElement(l.a.Item,{label:"内容",name:"content"},E.a.createElement(p.a.TextArea,null)))),E.a.createElement(d.a,{title:"发布公告",visible:V,onOk:function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.current.getFieldValue(),t.next=3,v.a.awrap(R({title:e.title,content:e.content,summary:"",link:""}));case 3:F(!1);case 4:case"end":return t.stop()}}))},onCancel:function(){F(!1)}},E.a.createElement(l.a,{ref:s},E.a.createElement(l.a.Item,{label:"公告标题",name:"title"},E.a.createElement(p.a,null)),E.a.createElement(l.a.Item,{label:"内容",name:"content"},E.a.createElement(p.a.TextArea,null)))))}))},"79Qs":function(e,t,n){},lxvL:function(e,t,n){"use strict";n("L/Qf");var a=n("2/Rp"),r=n("q1tI"),c=n.n(r),i=n("4i/N");n("79Qs");t.a=function(e){var t=e.title,n=e.onGetActiveList,r=e.onClose,o=e.onAdd;return c.a.createElement("div",{className:"inner-page-head"},t,n?c.a.createElement(a.a,{className:"active-btn",onClick:n},"双十一活动排行榜"):"",o?c.a.createElement(a.a,{className:"active-btn",type:"primary",onClick:o},"发布公告"):"",r?c.a.createElement(i.a,{className:"close-icon",onClick:r}):"")}}}]);